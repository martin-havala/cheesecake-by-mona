import{S as Oe,i as Re,s as Se,T as ie,q,U as ce,m as b,r as j,h as v,n as f,b as Z,C as s,g as O,v as me,f as ge,d as G,P as pe,y as ue,z as fe,p as Ne,A as he,u as Ue,B as de,ad as De,k as w,a as S,e as Ie,M as Ge,l as y,c as N,ae as He,o as Xe,ab as Je,ac as Ke,E as R,D as le,N as Ae,R as Pe,F as qe}from"../chunks/index.ff763a08.js";import{C as ke}from"../chunks/cake.d1394147.js";import{g as Ve,f as je}from"../chunks/index.3c01a0d7.js";import{d as Qe}from"../chunks/download-SVG.dd049a32.js";import{c as We}from"../chunks/indexedDB.48e348a5.js";const Ye=!0,Ze=!1,xe=!0,dt=Object.freeze(Object.defineProperty({__proto__:null,csr:Ye,prerender:xe,ssr:Ze},Symbol.toStringTag,{value:"Module"}));function ze(n,e,a){const r=n.slice();return r[2]=e[a],r[4]=a,r}function Te(n){let e,a,r,h=n[2].name+"",o,u;return a=new ke({props:{cake:n[2],wrap:!1}}),{c(){e=ie("g"),ue(a.$$.fragment),r=ie("text"),o=q(h),this.h()},l(l){e=ce(l,"g",{transform:!0});var t=b(e);fe(a.$$.fragment,t),r=ce(t,"text",{x:!0,y:!0,style:!0});var E=b(r);o=j(E,h),E.forEach(v),t.forEach(v),this.h()},h(){f(r,"x","340"),f(r,"y","150"),Ne(r,"font-size","15mm"),f(e,"transform","translate(600, "+(200+n[4]*300)+")")},m(l,t){Z(l,e,t),he(a,e,null),s(e,r),s(r,o),u=!0},p(l,t){const E={};t&1&&(E.cake=l[2]),a.$set(E),(!u||t&1)&&h!==(h=l[2].name+"")&&Ue(o,h)},i(l){u||(O(a.$$.fragment,l),u=!0)},o(l){G(a.$$.fragment,l),u=!1},d(l){l&&v(e),de(a)}}}function et(n){let e,a,r,h,o,u,l=n[0],t=[];for(let i=0;i<l.length;i+=1)t[i]=Te(ze(n,l,i));const E=i=>G(t[i],1,1,()=>{t[i]=null});return{c(){e=ie("svg"),a=ie("style"),r=q(`text {
			font-family: sans-serif;
		}
	`);for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=ce(i,"svg",{id:!0,width:!0,height:!0,viewBox:!0,version:!0,xmlns:!0,"xml:space":!0});var k=b(e);a=ce(k,"style",{});var d=b(a);r=j(d,`text {
			font-family: sans-serif;
		}
	`),d.forEach(v);for(let I=0;I<t.length;I+=1)t[I].l(k);k.forEach(v),this.h()},h(){f(e,"id",n[1]),f(e,"width","210mm"),f(e,"height",h=30+n[0].length*30+"mm"),f(e,"viewBox",o="0 0 2100 "+(300+n[0].length*300)),f(e,"version","1.1"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"xml:space","preserve")},m(i,k){Z(i,e,k),s(e,a),s(a,r);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);u=!0},p(i,[k]){if(k&1){l=i[0];let d;for(d=0;d<l.length;d+=1){const I=ze(i,l,d);t[d]?(t[d].p(I,k),O(t[d],1)):(t[d]=Te(I),t[d].c(),O(t[d],1),t[d].m(e,null))}for(me(),d=l.length;d<t.length;d+=1)E(d);ge()}(!u||k&2)&&f(e,"id",i[1]),(!u||k&1&&h!==(h=30+i[0].length*30+"mm"))&&f(e,"height",h),(!u||k&1&&o!==(o="0 0 2100 "+(300+i[0].length*300)))&&f(e,"viewBox",o)},i(i){if(!u){for(let k=0;k<l.length;k+=1)O(t[k]);u=!0}},o(i){t=t.filter(Boolean);for(let k=0;k<t.length;k+=1)G(t[k]);u=!1},d(i){i&&v(e),pe(t,i)}}}function tt(n,e,a){let{printList:r=[]}=e,{id:h="print"}=e;return n.$$set=o=>{"printList"in o&&a(0,r=o.printList),"id"in o&&a(1,h=o.id)},[r,h]}class lt extends Oe{constructor(e){super(),Re(this,e,tt,et,Se,{printList:0,id:1})}}const{document:ve}=Ke;function Be(n,e,a){const r=n.slice();return r[13]=e[a],r[15]=a,r}function Le(n,e,a){const r=n.slice();return r[13]=e[a],r[15]=a,r}function nt(n){return{c:R,l:R,m:R,p:R,i:R,o:R,d:R}}function at(n){let e,a,r,h,o,u,l,t,E,i,k,d,I,U,M,p,c,m,T,H,X,B,W,x,F,Q,V,A,P,ee,te,L=n[0],D=[];for(let _=0;_<L.length;_+=1)D[_]=Ce(Le(n,L,_));const ne=_=>G(D[_],1,1,()=>{D[_]=null});V=new lt({props:{printList:n[1]}});let J=n[1],z=[];for(let _=0;_<J.length;_+=1)z[_]=Me(Be(n,J,_));const Fe=_=>G(z[_],1,1,()=>{z[_]=null});return{c(){e=w("section"),a=w("h1"),r=q("Menu generator"),h=S(),o=w("p"),u=q("Manage your stored cakes & quickly generate a printable menu out of them"),l=S(),t=w("div"),E=w("div"),i=w("div"),k=q(`Stored in memory:
					`),d=w("div"),I=q("(Click on image to select it for printing)"),U=S(),M=w("div");for(let _=0;_<D.length;_+=1)D[_].c();p=S(),c=w("div"),m=w("div"),T=w("button"),H=q("Download"),X=q(`
					Selected for export:
					`),B=w("div"),W=q("(you can edit label of cakes here)"),x=S(),F=w("div"),Q=w("div"),ue(V.$$.fragment),A=S();for(let _=0;_<z.length;_+=1)z[_].c();this.h()},l(_){e=y(_,"SECTION",{class:!0});var $=b(e);a=y($,"H1",{});var C=b(a);r=j(C,"Menu generator"),C.forEach(v),h=N($),o=y($,"P",{});var g=b(o);u=j(g,"Manage your stored cakes & quickly generate a printable menu out of them"),g.forEach(v),l=N($),t=y($,"DIV",{class:!0});var K=b(t);E=y(K,"DIV",{class:!0});var ae=b(E);i=y(ae,"DIV",{class:!0});var _e=b(i);k=j(_e,`Stored in memory:
					`),d=y(_e,"DIV",{class:!0});var be=b(d);I=j(be,"(Click on image to select it for printing)"),be.forEach(v),_e.forEach(v),U=N(ae),M=y(ae,"DIV",{class:!0});var Ee=b(M);for(let Y=0;Y<D.length;Y+=1)D[Y].l(Ee);Ee.forEach(v),ae.forEach(v),p=N(K),c=y(K,"DIV",{class:!0});var re=b(c);m=y(re,"DIV",{class:!0});var se=b(m);T=y(se,"BUTTON",{style:!0});var $e=b(T);H=j($e,"Download"),$e.forEach(v),X=j(se,`
					Selected for export:
					`),B=y(se,"DIV",{class:!0});var we=b(B);W=j(we,"(you can edit label of cakes here)"),we.forEach(v),se.forEach(v),x=N(re),F=y(re,"DIV",{class:!0});var oe=b(F);Q=y(oe,"DIV",{class:!0});var ye=b(Q);fe(V.$$.fragment,ye),ye.forEach(v),A=N(oe);for(let Y=0;Y<z.length;Y+=1)z[Y].l(oe);oe.forEach(v),re.forEach(v),K.forEach(v),$.forEach(v),this.h()},h(){f(d,"class","tiny"),f(i,"class","menu-header"),f(M,"class","menu-list svelte-18z9bi0"),f(E,"class","cakeList svelte-18z9bi0"),Ne(T,"float","right"),f(B,"class","tiny"),f(m,"class","menu-header"),f(Q,"class","preview svelte-18z9bi0"),f(F,"class","menu-list svelte-18z9bi0"),f(c,"class","cakeList printList svelte-18z9bi0"),f(t,"class","menu svelte-18z9bi0"),f(e,"class","svelte-18z9bi0")},m(_,$){Z(_,e,$),s(e,a),s(a,r),s(e,h),s(e,o),s(o,u),s(e,l),s(e,t),s(t,E),s(E,i),s(i,k),s(i,d),s(d,I),s(E,U),s(E,M);for(let C=0;C<D.length;C+=1)D[C]&&D[C].m(M,null);s(t,p),s(t,c),s(c,m),s(m,T),s(T,H),s(m,X),s(m,B),s(B,W),s(c,x),s(c,F),s(F,Q),he(V,Q,null),s(F,A);for(let C=0;C<z.length;C+=1)z[C]&&z[C].m(F,null);P=!0,ee||(te=le(T,"click",n[9]),ee=!0)},p(_,$){if($&97){L=_[0];let g;for(g=0;g<L.length;g+=1){const K=Le(_,L,g);D[g]?(D[g].p(K,$),O(D[g],1)):(D[g]=Ce(K),D[g].c(),O(D[g],1),D[g].m(M,null))}for(me(),g=L.length;g<D.length;g+=1)ne(g);ge()}const C={};if($&2&&(C.printList=_[1]),V.$set(C),$&26){J=_[1];let g;for(g=0;g<J.length;g+=1){const K=Be(_,J,g);z[g]?(z[g].p(K,$),O(z[g],1)):(z[g]=Me(K),z[g].c(),O(z[g],1),z[g].m(F,null))}for(me(),g=J.length;g<z.length;g+=1)Fe(g);ge()}},i(_){if(!P){for(let $=0;$<L.length;$+=1)O(D[$]);O(V.$$.fragment,_);for(let $=0;$<J.length;$+=1)O(z[$]);P=!0}},o(_){D=D.filter(Boolean);for(let $=0;$<D.length;$+=1)G(D[$]);G(V.$$.fragment,_),z=z.filter(Boolean);for(let $=0;$<z.length;$+=1)G(z[$]);P=!1},d(_){_&&v(e),pe(D,_),de(V),pe(z,_),ee=!1,te()}}}function Ce(n){let e,a,r,h,o,u,l,t=n[13].name+"",E,i,k,d,I,U,M,p,c,m,T,H,X,B,W,x;o=new ke({props:{cake:n[13]}});function F(...V){return n[7](n[13],...V)}function Q(...V){return n[8](n[13],...V)}return{c(){e=w("div"),a=w("div"),r=w("button"),h=w("div"),ue(o.$$.fragment),u=S(),l=w("div"),E=q(t),i=S(),k=w("br"),d=S(),I=w("a"),U=w("button"),M=q("Edit"),c=S(),m=w("button"),T=q("Delete"),H=S(),this.h()},l(V){e=y(V,"DIV",{class:!0});var A=b(e);a=y(A,"DIV",{class:!0});var P=b(a);r=y(P,"BUTTON",{class:!0});var ee=b(r);h=y(ee,"DIV",{class:!0});var te=b(h);fe(o.$$.fragment,te),te.forEach(v),ee.forEach(v),u=N(P),l=y(P,"DIV",{class:!0});var L=b(l);E=j(L,t),i=N(L),k=y(L,"BR",{}),d=N(L),I=y(L,"A",{class:!0,href:!0});var D=b(I);U=y(D,"BUTTON",{});var ne=b(U);M=j(ne,"Edit"),ne.forEach(v),D.forEach(v),c=N(L),m=y(L,"BUTTON",{class:!0});var J=b(m);T=j(J,"Delete"),J.forEach(v),L.forEach(v),P.forEach(v),H=N(A),A.forEach(v),this.h()},h(){f(h,"class","cake"),f(r,"class","cakeRow__button flat svelte-18z9bi0"),f(I,"class","icobutton flat"),f(I,"href",p=Ve(n[13])),f(m,"class",""),f(l,"class","label svelte-18z9bi0"),f(a,"class","cakeRow__item svelte-18z9bi0"),f(e,"class","cakeRow")},m(V,A){Z(V,e,A),s(e,a),s(a,r),s(r,h),he(o,h,null),s(a,u),s(a,l),s(l,E),s(l,i),s(l,k),s(l,d),s(l,I),s(I,U),s(U,M),s(l,c),s(l,m),s(m,T),s(e,H),B=!0,W||(x=[le(r,"click",F),le(m,"click",Q)],W=!0)},p(V,A){n=V;const P={};A&1&&(P.cake=n[13]),o.$set(P),(!B||A&1)&&t!==(t=n[13].name+"")&&Ue(E,t),(!B||A&1&&p!==(p=Ve(n[13])))&&f(I,"href",p)},i(V){B||(O(o.$$.fragment,V),X||Ae(()=>{X=Pe(e,je,{y:-50,duration:500,delay:50*n[15]}),X.start()}),B=!0)},o(V){G(o.$$.fragment,V),B=!1},d(V){V&&v(e),de(o),W=!1,qe(x)}}}function Me(n){let e,a,r,h,o,u,l,t,E,i,k,d,I,U;o=new ke({props:{cake:n[13]}});function M(...c){return n[10](n[13],...c)}function p(...c){return n[11](n[13],...c)}return{c(){e=w("div"),a=w("div"),r=w("button"),h=w("div"),ue(o.$$.fragment),u=S(),l=w("div"),t=w("textarea"),i=S(),this.h()},l(c){e=y(c,"DIV",{class:!0});var m=b(e);a=y(m,"DIV",{class:!0});var T=b(a);r=y(T,"BUTTON",{class:!0});var H=b(r);h=y(H,"DIV",{class:!0});var X=b(h);fe(o.$$.fragment,X),X.forEach(v),H.forEach(v),u=N(T),l=y(T,"DIV",{class:!0});var B=b(l);t=y(B,"TEXTAREA",{cols:!0,class:!0}),b(t).forEach(v),B.forEach(v),T.forEach(v),i=N(m),m.forEach(v),this.h()},h(){f(h,"class","cake"),f(r,"class","cakeRow__button superflat flat svelte-18z9bi0"),f(t,"cols","13"),f(t,"class","cakeRow__input svelte-18z9bi0"),t.value=E=n[13].name,f(l,"class","label svelte-18z9bi0"),f(a,"class","cakeRow__item svelte-18z9bi0"),f(e,"class","cakeRow")},m(c,m){Z(c,e,m),s(e,a),s(a,r),s(r,h),he(o,h,null),s(a,u),s(a,l),s(l,t),s(e,i),d=!0,I||(U=[le(r,"click",M),le(t,"change",p)],I=!0)},p(c,m){n=c;const T={};m&2&&(T.cake=n[13]),o.$set(T),(!d||m&2&&E!==(E=n[13].name))&&(t.value=E)},i(c){d||(O(o.$$.fragment,c),k||Ae(()=>{k=Pe(e,je,{y:-50,duration:500,delay:50*n[15]}),k.start()}),d=!0)},o(c){G(o.$$.fragment,c),d=!1},d(c){c&&v(e),de(o),I=!1,qe(U)}}}function rt(n){return{c:R,l:R,m:R,p:R,i:R,o:R,d:R}}function st(n){let e,a,r,h,o,u={ctx:n,current:null,token:null,hasCatch:!1,pending:rt,then:at,catch:nt,blocks:[,,,]};return De(h=n[2],u),{c(){e=w("meta"),a=S(),r=Ie(),u.block.c(),this.h()},l(l){const t=Ge("svelte-4ig4ka",ve.head);e=y(t,"META",{name:!0,content:!0}),t.forEach(v),a=N(l),r=Ie(),u.block.l(l),this.h()},h(){ve.title="Menu",f(e,"name","description"),f(e,"content","Menu generator")},m(l,t){s(ve.head,e),Z(l,a,t),Z(l,r,t),u.block.m(l,u.anchor=t),u.mount=()=>r.parentNode,u.anchor=r,o=!0},p(l,[t]){n=l,u.ctx=n,t&4&&h!==(h=n[2])&&De(h,u)||He(u,n,t)},i(l){o||(O(u.block),o=!0)},o(l){for(let t=0;t<3;t+=1){const E=u.blocks[t];G(E)}o=!1},d(l){v(e),l&&v(a),l&&v(r),u.block.d(l),u.token=null,u=null}}}function ot(n,e,a){let r=[],h=[],o;const u=(p,c)=>{o.then(m=>m.put("cakes",{...p,printOrder:c})).then(m=>i())},l=p=>{o.then(c=>c.delete("cakes",p.id??-1)).then(c=>i())},t=p=>{var m;const c=p;delete c.id,u(c,(((m=h.at(-1))==null?void 0:m.printOrder)??0)+1)},E=p=>{o.then(c=>c.delete("cakes",p.id??-1)).then(c=>i())};function i(){o.then(p=>{p.getAllFromIndex("cakes","byName").then(c=>{a(0,[r,h]=c.reduce((m,T)=>T.printOrder?[m[0],[...m[1],T]]:[[...m[0],T],m[1]],[[],[]]),r,a(1,h))})})}return Xe(()=>{a(2,o=We()),i()}),Je(()=>o.then(p=>p.close())),[r,h,o,u,l,t,E,(p,c)=>t(p),(p,c)=>E(p),p=>Qe(document.getElementById("print"),"byMona-menu.svg"),(p,c)=>l(p),(p,c)=>{l(p),u({...p,name:c.currentTarget.value},p.printOrder??0)}]}class _t extends Oe{constructor(e){super(),Re(this,e,ot,st,Se,{})}}export{_t as component,dt as universal};
