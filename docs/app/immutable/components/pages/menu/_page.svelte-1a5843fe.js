import{S as Le,i as Ce,s as Oe,R as se,q as F,T as re,m as k,r as G,h as v,n as f,b as W,C as o,f as M,g as de,d as _e,t as H,O as ve,w as oe,x as ie,p as Re,y as ce,u as Me,z as ue,ad as $e,k as E,a as U,e as we,L as Pe,l as $,c as A,ae as qe,o as Fe,ab as Ge,ac as He,B as N,D as x,M as Ne,Q as Se,E as Ue}from"../../../chunks/index-431f36ca.js";import{C as me}from"../../../chunks/cake-01b969e8.js";import{g as De}from"../../../chunks/bake-url-dd64d6a1.js";import{d as Qe}from"../../../chunks/download-SVG-dd049a32.js";import{c as Xe}from"../../../chunks/indexedDB-48e348a5.js";import{f as Ae}from"../../../chunks/index-18eb128e.js";function ye(n,e,a){const s=n.slice();return s[2]=e[a],s[4]=a,s}function Ie(n){let e,a,s,h=n[2].name+"",r,i;return a=new me({props:{cake:n[2],wrap:!1}}),{c(){e=se("g"),oe(a.$$.fragment),s=se("text"),r=F(h),this.h()},l(l){e=re(l,"g",{transform:!0});var t=k(e);ie(a.$$.fragment,t),s=re(t,"text",{x:!0,y:!0,style:!0});var b=k(s);r=G(b,h),b.forEach(v),t.forEach(v),this.h()},h(){f(s,"x","340"),f(s,"y","150"),Re(s,"font-size","15mm"),f(e,"transform","translate(600, "+(200+n[4]*300)+")")},m(l,t){W(l,e,t),ce(a,e,null),o(e,s),o(s,r),i=!0},p(l,t){const b={};t&1&&(b.cake=l[2]),a.$set(b),(!i||t&1)&&h!==(h=l[2].name+"")&&Me(r,h)},i(l){i||(M(a.$$.fragment,l),i=!0)},o(l){H(a.$$.fragment,l),i=!1},d(l){l&&v(e),ue(a)}}}function je(n){let e,a,s,h,r,i,l=n[0],t=[];for(let u=0;u<l.length;u+=1)t[u]=Ie(ye(n,l,u));const b=u=>H(t[u],1,1,()=>{t[u]=null});return{c(){e=se("svg"),a=se("style"),s=F(`text {
			font-family: sans-serif;
		}
	`);for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=re(u,"svg",{id:!0,width:!0,height:!0,viewBox:!0,version:!0,xmlns:!0,"xml:space":!0});var p=k(e);a=re(p,"style",{});var d=k(a);s=G(d,`text {
			font-family: sans-serif;
		}
	`),d.forEach(v);for(let V=0;V<t.length;V+=1)t[V].l(p);p.forEach(v),this.h()},h(){f(e,"id",n[1]),f(e,"width","210mm"),f(e,"height",h=30+n[0].length*30+"mm"),f(e,"viewBox",r="0 0 2100 "+(300+n[0].length*300)),f(e,"version","1.1"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"xml:space","preserve")},m(u,p){W(u,e,p),o(e,a),o(a,s);for(let d=0;d<t.length;d+=1)t[d].m(e,null);i=!0},p(u,[p]){if(p&1){l=u[0];let d;for(d=0;d<l.length;d+=1){const V=ye(u,l,d);t[d]?(t[d].p(V,p),M(t[d],1)):(t[d]=Ie(V),t[d].c(),M(t[d],1),t[d].m(e,null))}for(de(),d=l.length;d<t.length;d+=1)b(d);_e()}(!i||p&2)&&f(e,"id",u[1]),(!i||p&1&&h!==(h=30+u[0].length*30+"mm"))&&f(e,"height",h),(!i||p&1&&r!==(r="0 0 2100 "+(300+u[0].length*300)))&&f(e,"viewBox",r)},i(u){if(!i){for(let p=0;p<l.length;p+=1)M(t[p]);i=!0}},o(u){t=t.filter(Boolean);for(let p=0;p<t.length;p+=1)H(t[p]);i=!1},d(u){u&&v(e),ve(t,u)}}}function Je(n,e,a){let{printList:s=[]}=e,{id:h="print"}=e;return n.$$set=r=>{"printList"in r&&a(0,s=r.printList),"id"in r&&a(1,h=r.id)},[s,h]}class Ke extends Le{constructor(e){super(),Ce(this,e,Je,je,Oe,{printList:0,id:1})}}const{document:he}=He;function Ve(n,e,a){const s=n.slice();return s[13]=e[a],s[15]=a,s}function ze(n,e,a){const s=n.slice();return s[13]=e[a],s[15]=a,s}function We(n){return{c:N,l:N,m:N,p:N,i:N,o:N,d:N}}function Ye(n){let e,a,s,h,r,i,l,t,b,u,p,d,V,L,O,m,_,w,z,Q,X,B,j,q,Z,Y,T,P,R=n[0],y=[];for(let c=0;c<R.length;c+=1)y[c]=Be(ze(n,R,c));const ee=c=>H(y[c],1,1,()=>{y[c]=null});q=new Ke({props:{printList:n[1]}});let C=n[1],I=[];for(let c=0;c<C.length;c+=1)I[c]=Te(Ve(n,C,c));const te=c=>H(I[c],1,1,()=>{I[c]=null});return{c(){e=E("section"),a=E("h1"),s=F("Menu generator"),h=U(),r=E("div"),i=E("div"),l=E("div"),t=F(`Stored in memory:
					`),b=E("div"),u=F("(Click on image to select it for printing)"),p=U(),d=E("div");for(let c=0;c<y.length;c+=1)y[c].c();V=U(),L=E("div"),O=E("div"),m=E("button"),_=F("Download"),w=F(`
					Selected for export:
					`),z=E("div"),Q=F("(you can edit label of cakes here)"),X=U(),B=E("div"),j=E("div"),oe(q.$$.fragment),Z=U();for(let c=0;c<I.length;c+=1)I[c].c();this.h()},l(c){e=$(c,"SECTION",{class:!0});var D=k(e);a=$(D,"H1",{});var S=k(a);s=G(S,"Menu generator"),S.forEach(v),h=A(D),r=$(D,"DIV",{class:!0});var g=k(r);i=$(g,"DIV",{class:!0});var J=k(i);l=$(J,"DIV",{class:!0});var fe=k(l);t=G(fe,`Stored in memory:
					`),b=$(fe,"DIV",{class:!0});var ge=k(b);u=G(ge,"(Click on image to select it for printing)"),ge.forEach(v),fe.forEach(v),p=A(J),d=$(J,"DIV",{class:!0});var pe=k(d);for(let K=0;K<y.length;K+=1)y[K].l(pe);pe.forEach(v),J.forEach(v),V=A(g),L=$(g,"DIV",{class:!0});var le=k(L);O=$(le,"DIV",{class:!0});var ne=k(O);m=$(ne,"BUTTON",{style:!0});var ke=k(m);_=G(ke,"Download"),ke.forEach(v),w=G(ne,`
					Selected for export:
					`),z=$(ne,"DIV",{class:!0});var be=k(z);Q=G(be,"(you can edit label of cakes here)"),be.forEach(v),ne.forEach(v),X=A(le),B=$(le,"DIV",{class:!0});var ae=k(B);j=$(ae,"DIV",{class:!0});var Ee=k(j);ie(q.$$.fragment,Ee),Ee.forEach(v),Z=A(ae);for(let K=0;K<I.length;K+=1)I[K].l(ae);ae.forEach(v),le.forEach(v),g.forEach(v),D.forEach(v),this.h()},h(){f(b,"class","tiny"),f(l,"class","menu-header"),f(d,"class","menu-list svelte-18z9bi0"),f(i,"class","cakeList svelte-18z9bi0"),Re(m,"float","right"),f(z,"class","tiny"),f(O,"class","menu-header"),f(j,"class","preview svelte-18z9bi0"),f(B,"class","menu-list svelte-18z9bi0"),f(L,"class","cakeList printList svelte-18z9bi0"),f(r,"class","menu svelte-18z9bi0"),f(e,"class","svelte-18z9bi0")},m(c,D){W(c,e,D),o(e,a),o(a,s),o(e,h),o(e,r),o(r,i),o(i,l),o(l,t),o(l,b),o(b,u),o(i,p),o(i,d);for(let S=0;S<y.length;S+=1)y[S].m(d,null);o(r,V),o(r,L),o(L,O),o(O,m),o(m,_),o(O,w),o(O,z),o(z,Q),o(L,X),o(L,B),o(B,j),ce(q,j,null),o(B,Z);for(let S=0;S<I.length;S+=1)I[S].m(B,null);Y=!0,T||(P=x(m,"click",n[9]),T=!0)},p(c,D){if(D&97){R=c[0];let g;for(g=0;g<R.length;g+=1){const J=ze(c,R,g);y[g]?(y[g].p(J,D),M(y[g],1)):(y[g]=Be(J),y[g].c(),M(y[g],1),y[g].m(d,null))}for(de(),g=R.length;g<y.length;g+=1)ee(g);_e()}const S={};if(D&2&&(S.printList=c[1]),q.$set(S),D&26){C=c[1];let g;for(g=0;g<C.length;g+=1){const J=Ve(c,C,g);I[g]?(I[g].p(J,D),M(I[g],1)):(I[g]=Te(J),I[g].c(),M(I[g],1),I[g].m(B,null))}for(de(),g=C.length;g<I.length;g+=1)te(g);_e()}},i(c){if(!Y){for(let D=0;D<R.length;D+=1)M(y[D]);M(q.$$.fragment,c);for(let D=0;D<C.length;D+=1)M(I[D]);Y=!0}},o(c){y=y.filter(Boolean);for(let D=0;D<y.length;D+=1)H(y[D]);H(q.$$.fragment,c),I=I.filter(Boolean);for(let D=0;D<I.length;D+=1)H(I[D]);Y=!1},d(c){c&&v(e),ve(y,c),ue(q),ve(I,c),T=!1,P()}}}function Be(n){let e,a,s,h,r,i,l,t=n[13].name+"",b,u,p,d,V,L,O,m,_,w,z,Q,X,B,j,q;r=new me({props:{cake:n[13]}});function Z(...T){return n[7](n[13],...T)}function Y(...T){return n[8](n[13],...T)}return{c(){e=E("div"),a=E("div"),s=E("button"),h=E("div"),oe(r.$$.fragment),i=U(),l=E("div"),b=F(t),u=U(),p=E("br"),d=U(),V=E("a"),L=E("button"),O=F("Edit"),_=U(),w=E("button"),z=F("Delete"),Q=U(),this.h()},l(T){e=$(T,"DIV",{class:!0});var P=k(e);a=$(P,"DIV",{class:!0});var R=k(a);s=$(R,"BUTTON",{class:!0});var y=k(s);h=$(y,"DIV",{class:!0});var ee=k(h);ie(r.$$.fragment,ee),ee.forEach(v),y.forEach(v),i=A(R),l=$(R,"DIV",{class:!0});var C=k(l);b=G(C,t),u=A(C),p=$(C,"BR",{}),d=A(C),V=$(C,"A",{class:!0,href:!0});var I=k(V);L=$(I,"BUTTON",{});var te=k(L);O=G(te,"Edit"),te.forEach(v),I.forEach(v),_=A(C),w=$(C,"BUTTON",{class:!0});var c=k(w);z=G(c,"Delete"),c.forEach(v),C.forEach(v),R.forEach(v),Q=A(P),P.forEach(v),this.h()},h(){f(h,"class","cake"),f(s,"class","cakeRow__button flat svelte-18z9bi0"),f(V,"class","icobutton flat"),f(V,"href",m=De(n[13])),f(w,"class",""),f(l,"class","label svelte-18z9bi0"),f(a,"class","cakeRow__item svelte-18z9bi0"),f(e,"class","cakeRow")},m(T,P){W(T,e,P),o(e,a),o(a,s),o(s,h),ce(r,h,null),o(a,i),o(a,l),o(l,b),o(l,u),o(l,p),o(l,d),o(l,V),o(V,L),o(L,O),o(l,_),o(l,w),o(w,z),o(e,Q),B=!0,j||(q=[x(s,"click",Z),x(w,"click",Y)],j=!0)},p(T,P){n=T;const R={};P&1&&(R.cake=n[13]),r.$set(R),(!B||P&1)&&t!==(t=n[13].name+"")&&Me(b,t),(!B||P&1&&m!==(m=De(n[13])))&&f(V,"href",m)},i(T){B||(M(r.$$.fragment,T),X||Ne(()=>{X=Se(e,Ae,{y:-50,duration:500,delay:50*n[15]}),X.start()}),B=!0)},o(T){H(r.$$.fragment,T),B=!1},d(T){T&&v(e),ue(r),j=!1,Ue(q)}}}function Te(n){let e,a,s,h,r,i,l,t,b,u,p,d,V,L;r=new me({props:{cake:n[13]}});function O(..._){return n[10](n[13],..._)}function m(..._){return n[11](n[13],..._)}return{c(){e=E("div"),a=E("div"),s=E("button"),h=E("div"),oe(r.$$.fragment),i=U(),l=E("div"),t=E("textarea"),u=U(),this.h()},l(_){e=$(_,"DIV",{class:!0});var w=k(e);a=$(w,"DIV",{class:!0});var z=k(a);s=$(z,"BUTTON",{class:!0});var Q=k(s);h=$(Q,"DIV",{class:!0});var X=k(h);ie(r.$$.fragment,X),X.forEach(v),Q.forEach(v),i=A(z),l=$(z,"DIV",{class:!0});var B=k(l);t=$(B,"TEXTAREA",{cols:!0,class:!0}),k(t).forEach(v),B.forEach(v),z.forEach(v),u=A(w),w.forEach(v),this.h()},h(){f(h,"class","cake"),f(s,"class","cakeRow__button superflat flat svelte-18z9bi0"),f(t,"cols","13"),f(t,"class","cakeRow__input svelte-18z9bi0"),t.value=b=n[13].name,f(l,"class","label svelte-18z9bi0"),f(a,"class","cakeRow__item svelte-18z9bi0"),f(e,"class","cakeRow")},m(_,w){W(_,e,w),o(e,a),o(a,s),o(s,h),ce(r,h,null),o(a,i),o(a,l),o(l,t),o(e,u),d=!0,V||(L=[x(s,"click",O),x(t,"change",m)],V=!0)},p(_,w){n=_;const z={};w&2&&(z.cake=n[13]),r.$set(z),(!d||w&2&&b!==(b=n[13].name))&&(t.value=b)},i(_){d||(M(r.$$.fragment,_),p||Ne(()=>{p=Se(e,Ae,{y:-50,duration:500,delay:50*n[15]}),p.start()}),d=!0)},o(_){H(r.$$.fragment,_),d=!1},d(_){_&&v(e),ue(r),V=!1,Ue(L)}}}function Ze(n){return{c:N,l:N,m:N,p:N,i:N,o:N,d:N}}function xe(n){let e,a,s,h,r,i={ctx:n,current:null,token:null,hasCatch:!1,pending:Ze,then:Ye,catch:We,blocks:[,,,]};return $e(h=n[2],i),{c(){e=E("meta"),a=U(),s=we(),i.block.c(),this.h()},l(l){const t=Pe("svelte-4ig4ka",he.head);e=$(t,"META",{name:!0,content:!0}),t.forEach(v),a=A(l),s=we(),i.block.l(l),this.h()},h(){he.title="Menu",f(e,"name","description"),f(e,"content","Menu generator")},m(l,t){o(he.head,e),W(l,a,t),W(l,s,t),i.block.m(l,i.anchor=t),i.mount=()=>s.parentNode,i.anchor=s,r=!0},p(l,[t]){n=l,i.ctx=n,t&4&&h!==(h=n[2])&&$e(h,i)||qe(i,n,t)},i(l){r||(M(i.block),r=!0)},o(l){for(let t=0;t<3;t+=1){const b=i.blocks[t];H(b)}r=!1},d(l){v(e),l&&v(a),l&&v(s),i.block.d(l),i.token=null,i=null}}}function et(n,e,a){let s=[],h=[],r;const i=(m,_)=>{r.then(w=>w.put("cakes",{...m,printOrder:_})).then(w=>u())},l=m=>{r.then(_=>_.delete("cakes",m.id??-1)).then(_=>u())},t=m=>{var _;i({...m,id:void 0},(((_=h.at(-1))==null?void 0:_.printOrder)??0)+1)},b=m=>{r.then(_=>_.delete("cakes",m.id??-1)).then(_=>u())};function u(){r.then(m=>{m.getAllFromIndex("cakes","byName").then(_=>{a(0,[s,h]=_.reduce((w,z)=>z.printOrder?[w[0],[...w[1],z]]:[[...w[0],z],w[1]],[[],[]]),s,a(1,h))})})}return Fe(()=>{a(2,r=Xe()),u()}),Ge(()=>r.then(m=>m.close())),[s,h,r,i,l,t,b,(m,_)=>t(m),(m,_)=>b(m),m=>Qe(document.getElementById("print"),"byMona-menu.svg"),(m,_)=>l(m),(m,_)=>{l(m),i({...m,name:_.currentTarget.value},m.printOrder??0)}]}class ot extends Le{constructor(e){super(),Ce(this,e,et,xe,Oe,{})}}export{ot as default};
